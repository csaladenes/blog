<!doctype html>
<meta charset="utf-8">

<script src="d3.js"></script>
<script src="d3plus.js"></script>

<div id="viz"></div>

<script>
  d3.json("data.json",function(data){
  data.forEach(function(d,i){
      d["intensity"]=Math.pow((1000-d["pressure"])/100.0,4);
      d["mph"]=d["speed"]/1.6
      d["id"]=i
    })
  //console.log(data)
  var visualization = d3plus.viz()
    .container("#viz")
    .data(data)
    .type("scatter")
    .id(["id","region","name"])
    .depth(2)
    .x("year")
    //.x({"solo":d3.range(0,1000)})
    .time("year")
    .time({"solo":d3.range(1967,2018)})
    .color("region")
    //.color({"solo":d3.range(1930,2018)})
    .y("speed")
    .y({"solo":d3.range(160,351)})
    .size("intensity")
    .legend(true)
    .tooltip(["region","year","speed","mph","pressure"])
    //.shape("square")
    .ui([{"method":"y","value":["speed","pressure"]}])
    .draw()
  })
</script>